# Configuration file for CSCTriggerPrimitives building.
# Slava Valuev May-2006.

process MuonCSCTriggerPrimitives = {

    untracked PSet maxEvents = {untracked int32 input = -1}

    source = PoolSource {
#       untracked vstring fileNames = {"file:cscdigis.root"}
	untracked vstring fileNames = {"file:/data0/slava/test/muminus_pt50_CMSSW_1_6_0.root"}
#	untracked vstring fileNames = {"file:/data0/slava/test/digi_2571.root"}
	untracked uint32 debugVebosity = 10
	untracked bool   debugFlag     = true
    }

# es_source of ideal geometry
# ===========================
# endcap muon only...
    include "Geometry/MuonCommonData/data/muonEndcapIdealGeometryXML.cfi"

# Needed according to Mike Case's e-mail from 27/03.
    include "Geometry/MuonNumbering/data/muonNumberingInitialization.cfi"

# flags for modelling of CSC geometry
# ===================================
    include "Geometry/CSCGeometry/data/cscGeometry.cfi"

# magnetic field (do I need it?)
# ==============================
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

    service = MessageLogger {
	untracked vstring destinations = {"log.txt", "debug.txt", "errors.txt"}
	untracked vstring statistics = {"statistics.txt"}

# Constrain log.txt to LogInfo output...
##     untracked PSet log.txt = { untracked string threshold = "INFO" }

# No constraint on log.txt content...
	untracked PSet log.txt = {
	    untracked int32 lineLength = 132
	    untracked bool noLineBreaks = true
	}

	untracked PSet debug.txt = {
	    untracked string threshold = "DEBUG"
	    untracked int32 lineLength = 132
	    untracked bool noLineBreaks = true
	} 

	untracked PSet errors.txt = { untracked string threshold = "ERROR" }

	untracked PSet statistics.txt = { untracked string threshold = "INFO" }

# turn on the following to get LogDebug output
# ============================================
#        untracked vstring debugModules = {  "*"  }
	untracked vstring debugModules = { "l1CscTpgEmulDigis" }
#        untracked vstring debugModules = { }
    }

## block of common parameters for algorithms
## =========================================
##   block common_params = {
## Should I also use something like this?
## Flag to send info _I_ want to LogInfo
## Set false to minimize LogInfo output
##     untracked bool verboseInfo = true
##     int32 clusterSize = 3
##   }

# CSC Trigger Primitives configuration
# ====================================
    include "L1TriggerConfig/L1CSCTPConfigProducers/data/L1CSCTriggerPrimitivesConfig.cff"
    # replace l1csctpconf.isMTCC = true # data version

# CSC Trigger Primitives
# ======================
    include "L1Trigger/CSCTriggerPrimitives/data/l1CscTpgEmulDigis.cfi"
    replace l1CscTpgEmulDigis.alctParamDef.verbosity = 2
    replace l1CscTpgEmulDigis.clctParamDef.verbosity = 2
    replace l1CscTpgEmulDigis.tmbParam.verbosity     = 2
    # replace l1CscTpgEmulDigis.commonParam.isMTCC = true    # data version
    # replace l1CscTpgEmulDigis.alctParamMTCC2.verbosity = 2 # data version
    # replace l1CscTpgEmulDigis.clctParamMTCC2.verbosity = 2 # data version
#- For cosmic data
#    replace l1CscTpgEmulDigis.CSCComparatorDigiProducer = cscunpacker:MuonCSCComparatorDigi
#    replace l1CscTpgEmulDigis.CSCWireDigiProducer       = cscunpacker:MuonCSCWireDigi
#    replace l1CscTpgEmulDigis.alctParam.alctTrigMode    = 2

# Auxiliary services
# ==================
#    service = Timing { }
#    service = SimpleMemoryCheck { }
#    service = EnableFloatingPointExceptions {}
#    service = Tracer {}
#    service = SimpleProfiling { }

    module out = PoolOutputModule {
#	untracked string fileName = "lcts.root"
	untracked string fileName = "/data0/slava/test/lcts_muminus_pt50_emul_def_CMSSW_1_6_0.root"
#	untracked string fileName = "/data0/slava/test/lcts_muminus_pt50_emul_TMB07.root"
#	untracked string fileName = "/data0/slava/test/lcts_2571.root"
	untracked vstring outputCommands = {
	    "keep *",
	    "drop *_DaqSource_*_*"
	}
    }

# scheduler path
# ==============
    path p = {l1CscTpgEmulDigis}
    endpath ep = {out}
}
